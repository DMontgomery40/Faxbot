{"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","type":"heading","level":2,"anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"People’s devices can contain a large amount of sensitive data that an attacker might want to use for malicious purposes."},{"type":"text","text":" "},{"type":"text","text":"If your app contains any security vulnerabilities, an attacker may exploit the vulnerabilities to access or modify the data in your app, extension, App Clip, or device driver."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Adopt the Enhanced Security capability in your Xcode project to enable a collection of build settings and entitlements designed to mitigate certain common vulnerabilities in your app."},{"type":"text","text":" "},{"type":"text","text":"Review the behavior of your app with these settings enabled, and fix any problems that Xcode and the system report."}]},{"name":"Important","type":"aside","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"The Enhanced Security capability enables security checks that can impact the performance and stability of an app that isn’t designed and built with security in mind."},{"type":"text","text":" "},{"type":"text","text":"Review your app’s threat model, and only adopt the Enhanced Security capability if the protections it enables align with your app’s security goals."},{"type":"text","text":" "},{"type":"text","text":"Test your app thoroughly to ensure that you address all situations in which Enhanced Security mitigations could lead to your app crashing."}]}],"style":"important"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Enhanced Security compiler settings and runtime checks are available for apps and extensions built for iOS, iPadOS, macOS, and visionOS; App Clips in iOS; and DriverKit extensions in iPadOS and macOS."},{"type":"text","text":" "},{"type":"text","text":"Additionally, you can create Enhanced Security helper extensions on iOS, iPadOS, and macOS to which the system provides further protections; for more information, see "},{"type":"reference","isActive":true,"identifier":"doc://com.apple.Xcode/documentation/Xcode/creating-enhanced-security-helper-extensions"},{"type":"text","text":"."}]},{"text":"Adopt the Enhanced Security capability","type":"heading","level":3,"anchor":"Adopt-the-Enhanced-Security-capability"},{"type":"paragraph","inlineContent":[{"text":"Navigate to the Signing and Capabilities editor for your Xcode target, and click the Add Capability button.","type":"text"},{"text":" ","type":"text"},{"text":"From the list of capabilities, select Enhanced Security.","type":"text"},{"text":" ","type":"text"},{"text":"Xcode adds the following entitlements to your app’s provisioning profile:","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"isActive":true,"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.enhanced-security-version","type":"reference"},{"text":": Xcode sets the value to ","type":"text"},{"type":"codeVoice","code":"1"},{"text":".","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process","type":"reference","isActive":true},{"type":"text","text":": Xcode sets the value to "},{"code":"true","type":"codeVoice"},{"type":"text","text":"."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.hardened-heap"},{"text":": Xcode sets the value to ","type":"text"},{"type":"codeVoice","code":"true"},{"text":".","type":"text"}]}]},{"content":[{"inlineContent":[{"isActive":true,"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.platform-restrictions","type":"reference"},{"text":": Xcode sets the value to ","type":"text"},{"code":"2","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.dyld-ro","isActive":true,"type":"reference"},{"text":": Xcode sets the value to ","type":"text"},{"code":"true","type":"codeVoice"},{"text":".","type":"text"}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you add the Enhanced Security capability to your target, use the checkboxes in the Enhanced Security capability of the Signing and Capabilities editor to adopt specific hardening features."},{"type":"text","text":" "},{"type":"text","text":"Additionally, click Enable Build Settings to add security-related build settings to all targets in your project, which turns on certain hardening features."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The sections below describe the individual entitlements and build settings that comprise Enhanced Security, and the steps you can take to adopt the hardening features in your code."},{"type":"text","text":" "},{"type":"text","text":"Additionally, the sections describe how you can turn off any individual hardening setting, in case you need to do so while you prepare your code to support the additional protections."}]},{"text":"Prepare your app for pointer authentication","type":"heading","level":3,"anchor":"Prepare-your-app-for-pointer-authentication"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The Enhanced Security capability includes additional runtime platform restrictions, which Xcode enables by default for your app when you adopt the capability by setting the "},{"type":"codeVoice","code":"ENABLE_POINTER_AUTHENTICATION"},{"type":"text","text":" build setting to "},{"type":"codeVoice","code":"Yes"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"With these additional runtime platform restrictions enabled, Xcode builds your app for the "},{"type":"codeVoice","code":"arm64e"},{"type":"text","text":" architecture and enables "},{"inlineContent":[{"text":"pointer authentication","type":"text"}],"type":"emphasis"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you enable pointer authentication, the system generates signature metadata for pointers that your app creates by allocating memory or constructing C++ objects. Then the system validates that the signatures are unchanged when your app accesses the memory addressed by those pointers."},{"type":"text","text":" "},{"type":"text","text":"If the signature for a pointer isn’t valid, the system encounters an exception and crashes your app."},{"type":"text","text":" "},{"type":"text","text":"Doing so helps to protect against an attacker overwriting memory in your app to compromise the app’s control flow."}]},{"type":"paragraph","inlineContent":[{"text":"To adopt pointer authentication, use the ","type":"text"},{"code":"__ptrauth","type":"codeVoice"},{"text":" type qualifier to instruct the compiler to generate pointer authentication protection for variables in your code that store data and function pointers.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When a variable uses pointer authentication, the system throws an error if you overwrite its value with a raw pointer in your code, or copy its value to another variable that uses a different pointer authentication schema."},{"type":"text","text":" "},{"type":"text","text":"If your app does either of these, the system encounters an exception and crashes your app."},{"type":"text","text":" "},{"type":"text","text":"Instead, sign the pointer before storing it, re-signing it for a different use if necessary."},{"type":"text","text":" "},{"type":"text","text":"For more information, see "},{"type":"reference","identifier":"doc://com.apple.documentation/documentation/Apple-Silicon/improving-control-flow-integrity-with-pointer-authentication","isActive":true},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"text":"If you need to turn off pointer authentication for your target, uncheck the Authenticate Pointers checkbox in the Signing and Capabilities editor, or set the ","type":"text"},{"code":"ENABLE_POINTER_AUTHENTICATION","type":"codeVoice"},{"text":" build setting to ","type":"text"},{"code":"No","type":"codeVoice"},{"text":".","type":"text"}]},{"text":"Adopt typed allocator support","type":"heading","level":3,"anchor":"Adopt-typed-allocator-support"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you adopt the Enhanced Security capability, Xcode configures build settings to enable the compiler’s typed allocator in C and C++ code."},{"type":"text","text":" "},{"type":"text","text":"For more information on the typed allocator and the changes you need to make in your code if you use custom memory-allocator wrapper functions, see "},{"type":"reference","isActive":true,"identifier":"doc://com.apple.Xcode/documentation/Xcode/adopting-type-aware-memory-allocation"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To turn off typed allocator support for your target, uncheck the Enable Typed Allocators checkbox in the Signing and Capabilities editor, or set the "},{"type":"codeVoice","code":"CLANG_ENABLE_C_TYPED_ALLOCATOR_SUPPORT"},{"type":"text","text":" build setting to "},{"type":"codeVoice","code":"No"},{"type":"text","text":" for C code, and the "},{"type":"codeVoice","code":"CLANG_ENABLE_CPLUSPLUS_TYPED_ALLOCATOR_SUPPORT"},{"type":"text","text":" build setting to "},{"type":"codeVoice","code":"No"},{"type":"text","text":" for C++ code."}]},{"text":"Adopt memory integrity enforcement","type":"heading","level":3,"anchor":"Adopt-memory-integrity-enforcement"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you enable hardware memory tagging,"},{"type":"text","text":" "},{"type":"text","text":"each new memory allocation and any pointers to that memory"},{"type":"text","text":" "},{"type":"text","text":"include an embedded value called a "},{"type":"emphasis","inlineContent":[{"text":"tag","type":"text"}]},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"Accessing to memory through a pointer requires"},{"type":"text","text":" "},{"type":"text","text":"that the pointer’s tag matches the allocation’s tag."},{"type":"text","text":" "},{"type":"text","text":"If the tags don’t match —"},{"type":"text","text":" "},{"type":"text","text":"for example, because of a use-after-free error or out-of-bounds access —"},{"type":"text","text":" "},{"type":"text","text":"the app crashes instead of performing the unsafe access."}]},{"inlineContent":[{"text":"To enable memory tagging,","type":"text"},{"text":" ","type":"text"},{"text":"navigate to the Signing and Capabilities editor for your Xcode target.","type":"text"},{"text":" ","type":"text"},{"text":"Enable the Enhanced Security capability,","type":"text"},{"text":" ","type":"text"},{"text":"then, under Memory Safety, click Enable Hardware Memory Tagging.","type":"text"},{"text":" ","type":"text"},{"text":"Xcode adds the","type":"text"},{"text":" ","type":"text"},{"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations","type":"reference","isActive":true},{"text":" ","type":"text"},{"text":"and","type":"text"},{"text":" ","type":"text"},{"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.no-tagged-receive","type":"reference","isActive":true},{"text":" ","type":"text"},{"text":"entitlements to your app.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"To enable additional diagnostics while debugging,","type":"text"},{"text":" ","type":"text"},{"text":"navigate to the Scheme Editor and select the Run action,","type":"text"},{"text":" ","type":"text"},{"text":"then select the Diagnostics pane and enable Hardware Memory Tagging.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Another way to use hardware memory tagging is "},{"inlineContent":[{"type":"text","text":"soft mode"}],"type":"emphasis"},{"type":"text","text":","},{"type":"text","text":" "},{"type":"text","text":"where the system produces a simulated crash instead of terminating the app"},{"type":"text","text":" "},{"type":"text","text":"if a pointer’s tag doesn’t match the memory allocation’s tag."},{"type":"text","text":" "},{"type":"text","text":"To help you find memory issues,"},{"type":"text","text":" "},{"type":"text","text":"you can enable soft mode in your tests or in production"},{"type":"text","text":" "},{"type":"text","text":"and review any reports from simulated crashes."},{"type":"text","text":" "},{"type":"text","text":"To enable soft mode,"},{"type":"text","text":" "},{"type":"text","text":"navigate to the Signing and Capabilities editor for your Xcode target,"},{"type":"text","text":" "},{"type":"text","text":"then, under Memory Safety, click Enable Soft Mode for Memory Tagging."},{"type":"text","text":" "},{"type":"text","text":"When you enable soft mode,"},{"type":"text","text":" "},{"type":"text","text":"Xcode adds the"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.soft-mode"},{"type":"text","text":" "},{"type":"text","text":"entitlement."}],"type":"paragraph"},{"inlineContent":[{"text":"You can also enable the","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.enable-pure-data"},{"text":" ","type":"text"},{"text":"entitlement.","type":"text"}],"type":"paragraph"},{"content":[{"inlineContent":[{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"This setting is available on iOS 26 and later"},{"type":"text","text":" "},{"type":"text","text":"on iPhone 17, iPhone 17 Pro, iPhone 17 Pro Max, or iPhone Air."}],"type":"paragraph"}],"name":"Note","type":"aside","style":"note"},{"text":"Initialize stack variables to zero","anchor":"Initialize-stack-variables-to-zero","type":"heading","level":3},{"inlineContent":[{"type":"text","text":"When you enable the Enhanced Security capability for your target, Xcode sets the "},{"code":"CLANG_ENABLE_STACK_ZERO_INIT","type":"codeVoice"},{"type":"text","text":" build setting to "},{"code":"Yes","type":"codeVoice"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"This build setting configures the compiler to initialize automatic variables in your code with zeroes."},{"type":"text","text":" "},{"type":"text","text":"Doing so helps to protect against particular types of use-after-free vulnerability, because your app zeroes out previous values in stack memory before it reuses them for other variables."}],"type":"paragraph"},{"inlineContent":[{"text":"If you need to turn off zero-initialization of stack variables for your target, set the ","type":"text"},{"type":"codeVoice","code":"CLANG_ENABLE_STACK_ZERO_INIT"},{"text":" build setting to ","type":"text"},{"type":"codeVoice","code":"No"},{"text":".","type":"text"}],"type":"paragraph"},{"text":"Address security-related compiler warnings","anchor":"Address-security-related-compiler-warnings","type":"heading","level":3},{"inlineContent":[{"type":"text","text":"When you enable the Enhanced Security capability for your target, Xcode configures some compiler warnings that help to identify potentially insecure code."},{"type":"text","text":" "},{"type":"text","text":"These are:"}],"type":"paragraph"},{"items":[{"term":{"inlineContent":[{"type":"codeVoice","code":"-Wshadow"}]},"definition":{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The compiler warns you when a variable declaration "},{"inlineContent":[{"type":"text","text":"shadows"}],"type":"emphasis"},{"type":"text","text":" another variable or a type alias; that is, the variable has the same name as another entity, and uses of the variable’s name in the current scope use the newly declared variable when they might intend to use the original entity. Turn this warning off by setting the "},{"code":"GCC_WARN_SHADOW","type":"codeVoice"},{"type":"text","text":" build setting to "},{"code":"No","type":"codeVoice"},{"type":"text","text":"."}]}]}},{"term":{"inlineContent":[{"code":"-Wempty-body","type":"codeVoice"}]},"definition":{"content":[{"inlineContent":[{"text":"The compiler warns you when the body of a control flow statement, such as a ","type":"text"},{"type":"codeVoice","code":"for"},{"text":" loop or ","type":"text"},{"type":"codeVoice","code":"if"},{"text":" statement, doesn’t contain any code. Turn this warning off by setting the ","type":"text"},{"type":"codeVoice","code":"CLANG_WARN_EMPTY_BODY"},{"text":" build setting to ","type":"text"},{"type":"codeVoice","code":"No"},{"text":".","type":"text"}],"type":"paragraph"}]}}],"type":"termList"},{"inlineContent":[{"text":"Xcode additionally sets the ","type":"text"},{"code":"ENABLE_SECURITY_COMPILER_WARNINGS","type":"codeVoice"},{"text":" target build setting to ","type":"text"},{"code":"Yes","type":"codeVoice"},{"text":".","type":"text"},{"text":" ","type":"text"},{"text":"This turns on a collection of security-related compiler warnings that Xcode reports in the Issues navigator when you build the target. These additional warnings are:","type":"text"}],"type":"paragraph"},{"items":[{"definition":{"content":[{"inlineContent":[{"type":"text","text":"The compiler warns you when the destination buffer in a "},{"type":"codeVoice","code":"memcpy"},{"type":"text","text":" operation is smaller than the number of bytes you copy into it."}],"type":"paragraph"}]},"term":{"inlineContent":[{"type":"codeVoice","code":"-Wbuiltin-memcpy-chk-size"}]}},{"definition":{"content":[{"inlineContent":[{"text":"The compiler warns you when the format string for a ","type":"text"},{"code":"printf","type":"codeVoice"},{"text":"-like function isn’t a string literal.","type":"text"}],"type":"paragraph"}]},"term":{"inlineContent":[{"type":"codeVoice","code":"-Wformat-nonliteral"}]}},{"definition":{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The compiler warns you when an array index is before the beginning of an array, or past the end of an array; or that an array argument you pass to a function is smaller than the minimum size the function expects."}]}]},"term":{"inlineContent":[{"type":"codeVoice","code":"-Warray-bounds"}]}},{"definition":{"content":[{"inlineContent":[{"type":"text","text":"The compiler warns you when a calculated pointer value results in a pointer that’s before the beginning of an array, or past the end of an array."}],"type":"paragraph"}]},"term":{"inlineContent":[{"code":"-Warray-bounds-pointer-arithmetic","type":"codeVoice"}]}},{"definition":{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The compiler warns you when a memory operation acts on a dynamic class and might operate on its "},{"type":"codeVoice","code":"vtable"},{"type":"text","text":" pointer; the arguments to "},{"type":"codeVoice","code":"memset"},{"type":"text","text":" are transposed; a memory operation moves or copies an object that isn’t trivially copyable; or the size requested for a memory operation is "},{"type":"codeVoice","code":"0"},{"type":"text","text":", or the result of calling "},{"type":"codeVoice","code":"sizeof"},{"type":"text","text":" on the source pointer."}]}]},"term":{"inlineContent":[{"code":"-Wsuspicious-memaccess","type":"codeVoice"}]}},{"definition":{"content":[{"type":"paragraph","inlineContent":[{"text":"The compiler warns you when a ","type":"text"},{"type":"codeVoice","code":"sizeof"},{"text":" calculation doesn’t correctly calculate the number of elements in an array, due to using incorrect types.","type":"text"}]}]},"term":{"inlineContent":[{"code":"-Wsizeof-array-div","type":"codeVoice"}]}},{"definition":{"content":[{"type":"paragraph","inlineContent":[{"text":"The compiler warns you when a ","type":"text"},{"code":"sizeof","type":"codeVoice"},{"text":" calculation results in the size of a pointer, instead of the size of the array it refers to.","type":"text"}]}]},"term":{"inlineContent":[{"code":"-Wsizeof-pointer-div","type":"codeVoice"}]}},{"definition":{"content":[{"inlineContent":[{"type":"text","text":"The compiler warns you when your code returns an address on the stack (for example, the address of a local variable) to the calling function."}],"type":"paragraph"}]},"term":{"inlineContent":[{"type":"codeVoice","code":"-Wreturn-stack-address"}]}}],"type":"termList"},{"inlineContent":[{"text":"If you need to turn off the additional compiler warnings that Enhanced Security configures for your target, set the ","type":"text"},{"type":"codeVoice","code":"ENABLE_SECURITY_COMPILER_WARNINGS"},{"text":" build setting to ","type":"text"},{"type":"codeVoice","code":"No"},{"text":".","type":"text"}],"type":"paragraph"},{"text":"Adopt C++ standard library hardening and compiler bounds checking","anchor":"Adopt-C++-standard-library-hardening-and-compiler-bounds-checking","type":"heading","level":3},{"inlineContent":[{"type":"text","text":"When you enable the Enhanced Security capability for your target, Xcode sets the "},{"code":"ENABLE_CPLUSPLUS_BOUNDS_SAFE_BUFFERS","type":"codeVoice"},{"type":"text","text":" target build setting to "},{"code":"YES","type":"codeVoice"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"This enables a collection of safety checks in the C++ standard library."},{"type":"text","text":" "},{"type":"text","text":"Specifically, it enables the "},{"type":"emphasis","inlineContent":[{"text":"fast","type":"text"}]},{"type":"text","text":" hardening mode."}],"type":"paragraph"},{"inlineContent":[{"text":"In fast mode, the C++ standard library performs the following assertion checks in your code that uses standard library container types:","type":"text"}],"type":"paragraph"},{"items":[{"term":{"inlineContent":[{"type":"text","text":"Valid element access"}]},"definition":{"content":[{"inlineContent":[{"text":"The standard library checks that when your code accesses collection elements, including elements contained in the single-element collection types ","type":"text"},{"code":"std::function","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"std::optional","type":"codeVoice"},{"text":", the elements exist in the collection.","type":"text"}],"type":"paragraph"}]}},{"term":{"inlineContent":[{"type":"text","text":"Valid input range"}]},"definition":{"content":[{"type":"paragraph","inlineContent":[{"text":"The standard library checks that ranges you pass to standard algorithm functions are valid, and that if you define a range using a ","type":"text"},{"code":"begin","type":"codeVoice"},{"text":" iterator and a sentinel, the library can reach the sentinel from the iterator.","type":"text"}]}]}}],"type":"termList"},{"inlineContent":[{"type":"text","text":"The standard library calculates these checks in constant time."},{"type":"text","text":" "},{"type":"text","text":"If a hardening assertion fails (that is, if the check evaluates to "},{"code":"false","type":"codeVoice"},{"type":"text","text":"), the system encounters an exception and crashes your app."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"To change the C++ standard library hardening mode for a single file in your project, define the "},{"code":"_LIBCPP_HARDENING_MODE","type":"codeVoice"},{"type":"text","text":" macro with one of the following values:"}],"type":"paragraph"},{"items":[{"definition":{"content":[{"inlineContent":[{"text":"No hardening","type":"text"}],"type":"paragraph"}]},"term":{"inlineContent":[{"code":"_LIBCPP_HARDENING_MODE_NONE","type":"codeVoice"}]}},{"definition":{"content":[{"type":"paragraph","inlineContent":[{"text":"Fast mode","type":"text"}]}]},"term":{"inlineContent":[{"code":"_LIBCPP_HARDENING_MODE_FAST","type":"codeVoice"}]}},{"definition":{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Extensive hardening"}]}]},"term":{"inlineContent":[{"type":"codeVoice","code":"_LIBCPP_HARDENING_MODE_EXTENSIVE"}]}},{"definition":{"content":[{"type":"paragraph","inlineContent":[{"text":"All hardening checks","type":"text"}]}]},"term":{"inlineContent":[{"type":"codeVoice","code":"_LIBCPP_HARDENING_MODE_DEBUG"}]}}],"type":"termList"},{"inlineContent":[{"text":"If you define the macro in code, you need to place the definition at the beginning of the file, before you include any standard library headers.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Additionally, setting "},{"code":"ENABLE_CPLUSPLUS_BOUNDS_SAFE_BUFFERS","type":"codeVoice"},{"type":"text","text":" to "},{"code":"Yes","type":"codeVoice"},{"type":"text","text":" adds compiler warnings on unsafe buffer usage in C++, configuring the compiler to treat these warnings as errors."},{"type":"text","text":" "},{"type":"text","text":"The C++ compiler encounters an error if it detects that your code:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Indexes an array, performs pointer arithmetic, or uses an unsafe C standard library function on a raw pointers"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Calls "},{"type":"codeVoice","code":"operator[]()"},{"type":"text","text":" on a smart pointer that refers to a list of objects"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Constructs a "},{"code":"std::span","type":"codeVoice"},{"type":"text","text":" object using the two-argument (pointer and size) constructor"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"text","text":"To turn off C++ standard library hardening and compiler bounds checking for your target, set the "},{"code":"ENABLE_CPLUSPLUS_BOUNDS_SAFE_BUFFERS","type":"codeVoice"},{"type":"text","text":" build setting to "},{"code":"No","type":"codeVoice"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"text":"For more information on C++ standard library hardening, see ","type":"text"},{"isActive":true,"type":"reference","identifier":"https://libcxx.llvm.org/Hardening.html"},{"text":" in the LLVM documentation.","type":"text"}],"type":"paragraph"},{"text":"Adopt additional run-time restrictions","anchor":"Adopt-additional-run-time-restrictions","type":"heading","level":3},{"inlineContent":[{"text":"When you enable the Enhanced Security capability for your target, Xcode adds the ","type":"text"},{"isActive":true,"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.platform-restrictions","type":"reference"},{"text":" entitlement to your app.","type":"text"},{"text":" ","type":"text"},{"text":"This entitlement informs the system to perform additional checks on dynamic libraries your app or extension loads, and on Mach messages your app or extension receives from other processes.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"If you use "},{"isActive":true,"type":"reference","identifier":"doc://com.apple.documentation/documentation/XPC"},{"type":"text","text":" for inter-process communication (IPC) and don’t use Mach IPC traps, or don’t have any explicit IPC mechanism in your app or extension, enabling additional run-time restrictions turns on protections that are unlikely to require you to make any code changes."}],"type":"paragraph"},{"inlineContent":[{"text":"In apps and extensions that use Mach IPC traps, additional run-time restrictions turn potentially insecure situations into crashes to avoid giving an attacker privileged access to your process via Mach ports.","type":"text"},{"text":" ","type":"text"},{"text":"For information on interpreting these crashes and changes to your code that avoid potentially insecure use of Mach messaging APIs, see ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc://com.apple.Xcode/documentation/Xcode/conforming-to-mach-ipc-security-restrictions"},{"text":".","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"To turn off additional run-time restrictions for your target, uncheck the Enable Additional Runtime Platform Restrictions checkbox in the Signing and Capabilities editor.","type":"text"}],"type":"paragraph"},{"text":"Adopt read-only memory for internal platform state","anchor":"Adopt-read-only-memory-for-internal-platform-state","type":"heading","level":3},{"inlineContent":[{"type":"text","text":"When you enable the Enhanced Security capability for your target, Xcode adds the "},{"type":"reference","isActive":true,"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.dyld-ro"},{"type":"text","text":" entitlement to your app."},{"type":"text","text":" "},{"type":"text","text":"This entitlement informs the system to mark regions of memory in your process that the platform uses for its internal state as read-only."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"In most situations, this additional protection doesn’t require you to make any changes."},{"type":"text","text":" "},{"type":"text","text":"If your app modifies data in the protected regions — for example, it modifies the value of "},{"code":"const","type":"codeVoice"},{"type":"text","text":" data sections — the system crashes your app when you adopt this entitlement."},{"type":"text","text":" "},{"type":"text","text":"To fix the crash, remove the code that modifies the read-only memory regions."}],"type":"paragraph"},{"inlineContent":[{"text":"If you need to turn off read-only memory for the dynamic loader, uncheck the Enable Read-Only Platform Memory checkbox in the Signing and Capabilities editor.","type":"text"}],"type":"paragraph"},{"text":"Adopt bounds checking in C","anchor":"Adopt-bounds-checking-in-C","type":"heading","level":3},{"inlineContent":[{"type":"text","text":"When you enable build settings for Enhanced Security, Xcode sets the "},{"type":"codeVoice","code":"ENABLE_C_BOUNDS_SAFETY"},{"type":"text","text":" build setting with the value "},{"type":"codeVoice","code":"Yes"},{"type":"text","text":" for all targets in your app."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"ENABLE_C_BOUNDS_SAFETY"},{"type":"text","text":" build setting adds the "},{"type":"codeVoice","code":"-fbounds-safety"},{"type":"text","text":" flag to the compiler invocation when Xcode compiles C source files."},{"type":"text","text":" "},{"type":"text","text":"This is an extension to the C programming language that prevents out-of-bounds memory access by enforcing bounds safety."}],"type":"paragraph"},{"inlineContent":[{"text":"The compiler assumes that every pointer in your code that it compiles with the ","type":"text"},{"type":"codeVoice","code":"-fbounds-safety"},{"text":" flag points to a single object, and emits an error if you attempt to perform pointer arithmetic using the pointer, or use a subscript to access an array element based on the pointer.","type":"text"},{"text":" ","type":"text"},{"text":"To indicate that a pointer identifies a collection of objects of a given size, use one of these annotations:","type":"text"}],"type":"paragraph"},{"items":[{"term":{"inlineContent":[{"type":"codeVoice","code":"__counted_by(N)"}]},"definition":{"content":[{"inlineContent":[{"type":"text","text":"The pointer locates the first element in an array of length "},{"code":"N","type":"codeVoice"},{"type":"text","text":". The parameter "},{"code":"N","type":"codeVoice"},{"type":"text","text":" can be a constant, an arithmetic expression, or the name of a variable."}],"type":"paragraph"}]}},{"term":{"inlineContent":[{"type":"codeVoice","code":"__sized_by(N)"}]},"definition":{"content":[{"type":"paragraph","inlineContent":[{"text":"The pointer is the start of a memory buffer of size ","type":"text"},{"code":"N","type":"codeVoice"},{"text":" bytes. The parameter ","type":"text"},{"code":"N","type":"codeVoice"},{"text":" can be a constant, an arithmetic expression, or the name of a variable.","type":"text"}]}]}},{"term":{"inlineContent":[{"code":"__ended_by(P)","type":"codeVoice"}]},"definition":{"content":[{"inlineContent":[{"text":"The pointer is in a memory region with upper bound ","type":"text"},{"code":"P","type":"codeVoice"},{"text":". The parameter ","type":"text"},{"code":"P","type":"codeVoice"},{"text":" is the first pointer that’s beyond the last element in the memory region.","type":"text"}],"type":"paragraph"}]}}],"type":"termList"},{"inlineContent":[{"type":"text","text":"If the pointer can potentially be "},{"type":"codeVoice","code":"NULL"},{"type":"text","text":", add the suffix "},{"type":"codeVoice","code":"_or_null"},{"type":"text","text":" to the annotation name; for example, "},{"type":"codeVoice","code":"__counted_by_or_null(N)"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"text":"To indicate that a pointer identifies a collection of objects that has a particular sentinel value signifying the end — for example, a null-terminated string — use one of these annotations:","type":"text"}],"type":"paragraph"},{"items":[{"definition":{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The sentinal value is "},{"type":"codeVoice","code":"0"},{"type":"text","text":"."}]}]},"term":{"inlineContent":[{"code":"__null_terminated","type":"codeVoice"}]}},{"definition":{"content":[{"type":"paragraph","inlineContent":[{"text":"The sentinal value is ","type":"text"},{"code":"T","type":"codeVoice"},{"text":".","type":"text"}]}]},"term":{"inlineContent":[{"code":"__terminated_by(T)","type":"codeVoice"}]}}],"type":"termList"},{"inlineContent":[{"type":"text","text":"To indicate that a pointer refers to a value that you haven’t audited for bounds safety, add the "},{"code":"__unsafe_indexable","type":"codeVoice"},{"type":"text","text":" annotation."}],"type":"paragraph"},{"inlineContent":[{"text":"For more information, see ","type":"text"},{"type":"reference","identifier":"https://clang.llvm.org/docs/BoundsSafety.html","isActive":true},{"text":" on the LLVM website.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"To turn off bounds checking in C, set the value of the ","type":"text"},{"code":"ENABLE_C_BOUNDS_SAFETY","type":"codeVoice"},{"text":" build setting to ","type":"text"},{"code":"No","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"}]}],"sections":[],"seeAlsoSections":[{"generated":true,"title":"Security and privacy","anchor":"Security-and-privacy","identifiers":["doc://com.apple.Xcode/documentation/Xcode/verifying-the-origin-of-your-xcframeworks","doc://com.apple.Xcode/documentation/Xcode/creating-enhanced-security-helper-extensions","doc://com.apple.Xcode/documentation/Xcode/adopting-type-aware-memory-allocation","doc://com.apple.Xcode/documentation/Xcode/conforming-to-mach-ipc-security-restrictions"]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"type":"text","text":"Detect out-of-bounds memory access, use of freed memory, and other potential vulnerabilities."}],"metadata":{"title":"Enabling enhanced security for your app","roleHeading":"Article","role":"article"},"kind":"article","identifier":{"interfaceLanguage":"swift","url":"doc://com.apple.Xcode/documentation/Xcode/enabling-enhanced-security-for-your-app"},"hierarchy":{"paths":[["doc://com.apple.documentation/documentation/technologies","doc://com.apple.Xcode/documentation/Xcode","doc://com.apple.Xcode/documentation/Xcode/build-system"]]},"references":{"doc://com.apple.Xcode/documentation/Xcode/verifying-the-origin-of-your-xcframeworks":{"title":"Verifying the origin of your XCFrameworks","identifier":"doc://com.apple.Xcode/documentation/Xcode/verifying-the-origin-of-your-xcframeworks","role":"article","type":"topic","url":"/documentation/xcode/verifying-the-origin-of-your-xcframeworks","abstract":[{"type":"text","text":"Discover who signed a framework, and take action when that changes."}],"kind":"article"},"Xcode-PageImage-card.png":{"variants":[{"url":"https://docs-assets.developer.apple.com/published/cc63eacd8f7f660388b46204d1d9bbcb/Xcode-PageImage-card%402x.png","traits":["2x","light"]},{"url":"https://docs-assets.developer.apple.com/published/62dba87d5f60ec96eb48882c9dff86d8/Xcode-PageImage-card~dark%402x.png","traits":["2x","dark"]}],"type":"image","identifier":"Xcode-PageImage-card.png","alt":"The Xcode logo on a blue gradient background."},"https://clang.llvm.org/docs/BoundsSafety.html":{"title":"-fbounds-safety: Enforcing bounds safety for C","type":"link","titleInlineContent":[{"code":"-fbounds-safety","type":"codeVoice"},{"type":"text","text":": Enforcing bounds safety for C"}],"identifier":"https://clang.llvm.org/docs/BoundsSafety.html","url":"https://clang.llvm.org/docs/BoundsSafety.html"},"doc://com.apple.Xcode/documentation/Xcode":{"identifier":"doc://com.apple.Xcode/documentation/Xcode","url":"/documentation/xcode","role":"collection","images":[{"type":"card","identifier":"Xcode-PageImage-card.png"}],"kind":"article","abstract":[{"type":"text","text":"Build, test, and submit your app with Apple’s integrated development environment."}],"type":"topic","title":"Xcode"},"doc://com.apple.Xcode/documentation/Xcode/conforming-to-mach-ipc-security-restrictions":{"title":"Conforming to Mach IPC security restrictions","identifier":"doc://com.apple.Xcode/documentation/Xcode/conforming-to-mach-ipc-security-restrictions","role":"article","type":"topic","url":"/documentation/xcode/conforming-to-mach-ipc-security-restrictions","abstract":[{"type":"text","text":"Avoid crashes and potentially insecure situations associated with Mach messages."}],"kind":"article"},"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.enable-pure-data":{"title":"Memory Tag Pure Data","type":"topic","identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.enable-pure-data","kind":"symbol","role":"symbol","abstract":[{"text":"A Boolean value that indicates whether to tag memory that contains only data.","type":"text"}],"url":"/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.enable-pure-data"},"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.hardened-heap":{"title":"Hardened Heap","identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.hardened-heap","role":"symbol","type":"topic","url":"/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.hardened-heap","abstract":[{"type":"text","text":"A Boolean value that indicates whether the process opts in to type-aware memory allocations."}],"kind":"symbol"},"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.no-tagged-receive":{"kind":"symbol","title":"Prevent Receiving Tagged Memory","identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.no-tagged-receive","role":"symbol","type":"topic","abstract":[{"type":"text","text":"A Boolean value that indicates whether to prevent receiving tagged memory from other processes."}],"url":"/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.no-tagged-receive"},"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations":{"kind":"symbol","title":"Enable Hardware Memory Tagging","identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations","role":"symbol","type":"topic","abstract":[{"type":"text","text":"A Boolean value that enables tagging of pointers and memory allocations."}],"url":"/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations"},"doc://com.apple.documentation/documentation/XPC":{"kind":"symbol","title":"XPC","identifier":"doc://com.apple.documentation/documentation/XPC","role":"collection","type":"topic","abstract":[{"type":"text","text":"Access a low-level interprocess communication mechanism."}],"url":"/documentation/XPC"},"doc://com.apple.Xcode/documentation/Xcode/creating-enhanced-security-helper-extensions":{"title":"Creating enhanced security helper extensions","identifier":"doc://com.apple.Xcode/documentation/Xcode/creating-enhanced-security-helper-extensions","role":"article","type":"topic","url":"/documentation/xcode/creating-enhanced-security-helper-extensions","abstract":[{"type":"text","text":"Reduce opportunities for an attacker to target your app through its extensions."}],"kind":"article"},"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process":{"kind":"symbol","title":"Hardened Process","identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process","role":"symbol","type":"topic","abstract":[{"type":"text","text":"A Boolean value that indicates whether the executable opts in to additional security checks."}],"url":"/documentation/BundleResources/Entitlements/com.apple.security.hardened-process"},"doc://com.apple.documentation/documentation/Apple-Silicon/improving-control-flow-integrity-with-pointer-authentication":{"kind":"article","title":"Improving control flow integrity with pointer authentication","identifier":"doc://com.apple.documentation/documentation/Apple-Silicon/improving-control-flow-integrity-with-pointer-authentication","role":"article","type":"topic","abstract":[{"type":"text","text":"Increase confidence that your code uses pointers correctly."}],"url":"/documentation/Apple-Silicon/improving-control-flow-integrity-with-pointer-authentication"},"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.soft-mode":{"role":"symbol","kind":"symbol","abstract":[{"type":"text","text":"A Boolean value that indicates whether to log memory-tagging faults as a simulated crash, instead of terminating the process."}],"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.soft-mode","type":"topic","title":"Enable Soft Mode for Memory Tagging","url":"/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.checked-allocations.soft-mode"},"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.enhanced-security-version":{"role":"symbol","kind":"symbol","abstract":[{"type":"text","text":"The entitlement required for an executable to opt in to enhanced security protections."}],"identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.enhanced-security-version","type":"topic","title":"Enhanced Security","url":"/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.enhanced-security-version"},"https://libcxx.llvm.org/Hardening.html":{"url":"https://libcxx.llvm.org/Hardening.html","type":"link","identifier":"https://libcxx.llvm.org/Hardening.html","title":"Hardening Modes","titleInlineContent":[{"type":"text","text":"Hardening Modes"}]},"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.dyld-ro":{"url":"/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.dyld-ro","type":"topic","abstract":[{"type":"text","text":"An entitlement that marks memory used for internal platform state as read-only."}],"kind":"symbol","identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.dyld-ro","title":"Enable Read-Only Platform Memory","role":"symbol"},"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.platform-restrictions":{"title":"Additional Runtime Platform Restrictions","type":"topic","identifier":"doc://com.apple.documentation/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.platform-restrictions","kind":"symbol","role":"symbol","abstract":[{"type":"text","text":"An integer value that indicates the level of additional runtime security protections your app or extension opts in to."}],"url":"/documentation/BundleResources/Entitlements/com.apple.security.hardened-process.platform-restrictions"},"doc://com.apple.Xcode/documentation/Xcode/adopting-type-aware-memory-allocation":{"title":"Adopting type-aware memory allocation","type":"topic","identifier":"doc://com.apple.Xcode/documentation/Xcode/adopting-type-aware-memory-allocation","kind":"article","role":"article","abstract":[{"type":"text","text":"Reduce the opportunities to treat pointers as data in your code."}],"url":"/documentation/xcode/adopting-type-aware-memory-allocation"},"doc://com.apple.documentation/documentation/technologies":{"identifier":"doc://com.apple.documentation/documentation/technologies","type":"topic","url":"/documentation/technologies","abstract":[{"text":"","type":"text"}],"role":"overview","kind":"technologies","title":"Technologies"},"doc://com.apple.Xcode/documentation/Xcode/build-system":{"url":"/documentation/xcode/build-system","type":"topic","abstract":[{"type":"text","text":"Compile your code into a binary format, and customize your project settings to build your code."}],"title":"Build system","kind":"article","role":"collectionGroup","identifier":"doc://com.apple.Xcode/documentation/Xcode/build-system"}},"legalNotices":{"copyright":"Copyright &copy; 2025 Apple Inc. All rights reserved.","termsOfUse":"https://www.apple.com/legal/internet-services/terms/site.html","privacyPolicy":"https://www.apple.com/privacy/privacy-policy"}}