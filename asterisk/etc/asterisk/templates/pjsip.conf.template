[global]
type=global
user_agent=OpenFax-Asterisk

[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0

; Trunk endpoint
[trunk-aor]
type=aor
qualify_frequency=60
remove_existing=yes

[trunk-auth]
type=auth
auth_type=userpass
username=${SIP_USERNAME}
password=${SIP_PASSWORD}

[trunk-endpoint]
type=endpoint
transport=transport-udp
aors=trunk-aor
auth=trunk-auth
context=faxout
allow=ulaw,alaw
; T.38 UDPTL settings
t38_udptl=yes
t38_udptl_ec=redundancy
t38_udptl_maxdatagram=400
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
from_domain=${SIP_FROM_DOMAIN}
from_user=${SIP_FROM_USER}

[trunk-identify]
type=identify
endpoint=trunk-endpoint
match=${SIP_SERVER}

; Registration (if your provider requires it)
[trunk-registration]
type=registration
outbound_auth=trunk-auth
server_uri=sip:${SIP_SERVER}
client_uri=sip:${SIP_USERNAME}@${SIP_SERVER}
contact_user=${SIP_FROM_USER}
retry_interval=60
forbidden_retry_interval=600
expiration=300
transport=transport-udp
endpoint=trunk-endpoint
